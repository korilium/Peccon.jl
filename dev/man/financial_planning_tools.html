<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>financial planning tools · Peccon.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="Peccon.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">Peccon.jl</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">setup</a></li><li><a class="tocitem" href="fundamental_understanding_intuition.html">fundamental understanding</a></li><li><a class="tocitem" href="glossary.html">glossary</a></li><li><a class="tocitem" href="Theory.html">theory</a></li><li class="is-active"><a class="tocitem" href="financial_planning_tools.html">financial planning tools</a><ul class="internal"><li><a class="tocitem" href="#Modern-Portfolio-Theory-(MPT)"><span>Modern Portfolio Theory (MPT)</span></a></li></ul></li><li><a class="tocitem" href="../lib/API.html">API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="financial_planning_tools.html">financial planning tools</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="financial_planning_tools.html">financial planning tools</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/korilium/Peccon.jl/blob/master/docs/src/man/financial_planning_tools.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Planning-tools"><a class="docs-heading-anchor" href="#Planning-tools">Planning tools</a><a id="Planning-tools-1"></a><a class="docs-heading-anchor-permalink" href="#Planning-tools" title="Permalink"></a></h1><h2 id="Modern-Portfolio-Theory-(MPT)"><a class="docs-heading-anchor" href="#Modern-Portfolio-Theory-(MPT)">Modern Portfolio Theory (MPT)</a><a id="Modern-Portfolio-Theory-(MPT)-1"></a><a class="docs-heading-anchor-permalink" href="#Modern-Portfolio-Theory-(MPT)" title="Permalink"></a></h2><p>The modern portfolio theory (MPT) is one of the oldest applications in modern finance still used today. The technical implication can be found in the theory subsection.  We will now demonstrate how MPT is implemented in the Peccon package and lastly cover some import limitations and recommendations of the tool. </p><h3 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h3><p>First extract the daily price data of all the assets you are considering in your portfolio. </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Peccon</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Tickers = [&quot;IUSA.AS&quot;, &quot;IBCI.AS&quot;, &quot;IEMA.AS&quot;, &quot;WTCH.AS&quot;, &quot;VWRL.AS&quot;];</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; # data = data_alpha(Tickers, &quot;your_api_key&quot;, 248);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[1]</code><code class="nohighlight hljs ansi" style="display:block;">248×10 DataFrame
 Row │ timestamp   open     high     low      close    adjusted_close  volume  ⋯
     │ SubStrin…   Float64  Float64  Float64  Float64  Float64         Int64   ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ 2023-04-28   37.326   37.614   37.3     37.468         37.468    28596  ⋯
   2 │ 2023-04-27   36.705   37.097   36.69    37.048         37.048    33676
   3 │ 2023-04-26   37.019   37.038   36.56    36.804         36.804    42444
   4 │ 2023-04-25   37.196   37.334   37.12    37.254         37.254    16227
   5 │ 2023-04-24   37.349   37.434   37.24    37.276         37.276    41721  ⋯
   6 │ 2023-04-21   37.546   37.578   37.366   37.432         37.432    24382
   7 │ 2023-04-20   37.619   37.65    37.415   37.53          37.53     22249
   8 │ 2023-04-19   37.64    37.73    37.531   37.705         37.705    26006
  ⋮  │     ⋮          ⋮        ⋮        ⋮        ⋮           ⋮           ⋮     ⋱
 242 │ 2022-05-23   37.119   37.171   36.588   37.092         36.5654   29041  ⋯
 243 │ 2022-05-20   36.984   37.27    36.473   36.639         36.1189   25173
 244 │ 2022-05-19   37.289   37.335   36.656   36.86          36.3367   46675
 245 │ 2022-05-18   38.642   38.668   37.76    37.796         37.2594   21407
 246 │ 2022-05-17   38.459   38.831   38.2     38.465         37.9189   19388  ⋯
 247 │ 2022-05-16   38.328   38.5     38.169   38.385         37.8401   26989
 248 │ 2022-05-13   37.953   38.618   37.953   38.476         37.9298   11184
                                                  3 columns and 233 rows omitted</code></pre><p>Then calculated the daily log returns for each assets in the portfolio. </p><pre><code class="language-julia hljs">returns = daily_returns(data, Tickers);
returns[1:10,:]</code></pre><div class="data-frame"><p>10 rows × 5 columns</p><table class="data-frame"><thead><tr><th></th><th>IUSA.AS</th><th>IBCI.AS</th><th>IEMA.AS</th><th>WTCH.AS</th><th>VWRL.AS</th></tr><tr><th></th><th title="Float64">Float64</th><th title="Float64">Float64</th><th title="Float64">Float64</th><th title="Float64">Float64</th><th title="Float64">Float64</th></tr></thead><tbody><tr><th>1</th><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><th>2</th><td>0.0112729</td><td>0.00942744</td><td>0.00680165</td><td>0.00758457</td><td>0.00752853</td></tr><tr><th>3</th><td>0.00660783</td><td>-0.00519834</td><td>0.00815798</td><td>0.00657758</td><td>0.00581397</td></tr><tr><th>4</th><td>-0.0121528</td><td>-0.00207179</td><td>0.000655523</td><td>0.00287801</td><td>-0.0086051</td></tr><tr><th>5</th><td>-0.000590366</td><td>0.00550419</td><td>-0.00978801</td><td>-0.00394184</td><td>-0.0028863</td></tr><tr><th>6</th><td>-0.00417627</td><td>0.00108637</td><td>-0.00614988</td><td>-0.0104713</td><td>-0.00431389</td></tr><tr><th>7</th><td>-0.00261466</td><td>-0.00262337</td><td>-0.0147344</td><td>-0.00273196</td><td>-0.00184313</td></tr><tr><th>8</th><td>-0.0046521</td><td>0.00262337</td><td>0.00095435</td><td>-0.00345677</td><td>-0.00245223</td></tr><tr><th>9</th><td>0.00100833</td><td>-0.00108637</td><td>-0.0120217</td><td>-0.00521486</td><td>-0.00275159</td></tr><tr><th>10</th><td>0.00021241</td><td>-0.00103999</td><td>-0.00157109</td><td>0.0010408</td><td>0.00162966</td></tr></tbody></table></div><p>Subsequently, simulate 5000 possible portfolio combinations with the assets in the portfolio. </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Peccon ;</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_sim = sim_mpt(returns);</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_sim</code><code class="nohighlight hljs ansi" style="display:block;">5000×8 DataFrame
  Row │ exp_return   port_var   weight_IUSA.AS  weight_IBCI.AS  weight_IEMA.AS ⋯
      │ Float64      Float64    Float64         Float64         Float64        ⋯
──────┼─────────────────────────────────────────────────────────────────────────
    1 │ -0.0145046   0.0232696       0.265186       0.101977         0.249159  ⋯
    2 │ -0.00436058  0.0284143       0.554675       0.0878595        0.0122221
    3 │ -0.03554     0.0191875       0.171129       0.0318511        0.530173
    4 │ -0.0319945   0.0156636       0.101743       0.228824         0.404708
    5 │ -0.0153219   0.0212276       0.465959       0.141137         0.0898668 ⋯
    6 │ -0.0267208   0.0124764       0.1703         0.366531         0.0982855
    7 │ -0.0158824   0.0197476       0.301105       0.080635         0.0960332
    8 │ -0.0108726   0.0176522       0.0003953      0.344008         0.0176203
  ⋮   │      ⋮           ⋮            ⋮               ⋮               ⋮        ⋱
 4994 │ -0.0246882   0.0175398       0.161716       0.179266         0.309006  ⋯
 4995 │ -0.0355099   0.0142568       0.0565733      0.257939         0.422803
 4996 │ -0.024402    0.0135326       0.172711       0.549938         0.0352302
 4997 │ -0.00917191  0.0237513       0.416019       0.213114         0.0512691
 4998 │ -0.0136627   0.0195207       0.02275        0.157879         0.178958  ⋯
 4999 │ -0.00675541  0.0266694       0.320909       0.0769018        0.144546
 5000 │ -3.75709e-5  0.02919         0.349346       0.0126116        0.0148921
                                                 3 columns and 4985 rows omitted</code></pre><p>Plot the expected return and variance of each simulated portfolio to visualize the efficient frontier.  </p><pre><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;">   Resolving package versions...
    Updating `~/work/Peccon.jl/Peccon.jl/docs/Project.toml`
  [f3b207a7] + StatsPlots v0.15.4
  No Changes to `~/work/Peccon.jl/Peccon.jl/docs/Manifest.toml`</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using StatsPlots; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Tickers = [&quot;IUSA.AS&quot;, &quot;IBCI.AS&quot;, &quot;IEMA.AS&quot;, &quot;WTCH.AS&quot;, &quot;VWRL.AS&quot;]; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @df port_sim scatter(:port_var, :exp_return)</code><code class="nohighlight hljs ansi" style="display:block;">Plot{Plots.GRBackend() n=1}</code></pre><p>calculate the efficient frontier of the combinations of stocks. </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Peccon ; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_opt = opt_mpt(returns, 0.0:0.02:2.0, 0.00) ;</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_opt</code><code class="nohighlight hljs ansi" style="display:block;">101×9 DataFrame
 Row │ exp_return  port_var    risk_aversion  weight_IUSA.AS  weight_IBCI.AS   ⋯
     │ Float64     Float64     Float64        Float64         Float64          ⋯
─────┼──────────────────────────────────────────────────────────────────────────
   1 │ -0.0502222  0.00791188           0.0      1.16574e-15     0.693698      ⋯
   2 │ -0.0480154  0.00793326           0.02     2.7369e-15      0.68016
   3 │ -0.0458086  0.00799739           0.04     5.81253e-18     0.666622
   4 │ -0.0436018  0.00810428           0.06     1.66581e-16     0.653084
   5 │ -0.041395   0.00825393           0.08     1.7502e-16      0.639546      ⋯
   6 │ -0.0391882  0.00844633           0.1      1.67151e-16     0.626009
   7 │ -0.0369814  0.00868149           0.12     1.10256e-16     0.612471
   8 │ -0.0347746  0.00895941           0.14     1.41626e-19     0.598933
  ⋮  │     ⋮           ⋮             ⋮              ⋮               ⋮          ⋱
  95 │  0.0353537  0.058863             1.88     2.33698e-17     2.05198e-17   ⋯
  96 │  0.0353537  0.058863             1.9      1.68919e-17     1.39151e-17
  97 │  0.0353537  0.058863             1.92     2.153e-17       1.79128e-17
  98 │  0.0353537  0.058863             1.94     2.11164e-17     1.72563e-17
  99 │  0.0353537  0.058863             1.96     2.07808e-17     1.67451e-17   ⋯
 100 │  0.0353537  0.058863             1.98     2.16111e-17     1.72714e-17
 101 │  0.0353537  0.058863             2.0      1.22902e-16     9.8654e-17
                                                   4 columns and 86 rows omitted</code></pre><p>In the dataframe the optimal portfolios with their respective risk-aversions are shown. </p><p>subsequently, add the efficient frontier to the simulated plot. </p><pre><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;">   Resolving package versions...
  No Changes to `~/work/Peccon.jl/Peccon.jl/docs/Project.toml`
  No Changes to `~/work/Peccon.jl/Peccon.jl/docs/Manifest.toml`</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; using StatsPlots; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @df port_sim scatter(:port_var, :exp_return) # hide</code><code class="nohighlight hljs ansi" style="display:block;">Plot{Plots.GRBackend() n=1}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @df port_opt scatter!(:port_var, :exp_return)</code><code class="nohighlight hljs ansi" style="display:block;">Plot{Plots.GRBackend() n=2}</code></pre><p>Lastly, calculate the sharp ratio to find the portfolio with the optimal  return variation ratio </p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Peccon ; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Tickers = [&quot;IUSA.AS&quot;, &quot;IBCI.AS&quot;, &quot;IEMA.AS&quot;, &quot;WTCH.AS&quot;, &quot;VWRL.AS&quot;] ; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; returns = daily_returns(data, Tickers) ; # hide</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_sim_sharp = sharp_ratio(port_sim) ;</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_sim_sharp[end,:]</code><code class="nohighlight hljs ansi" style="display:block;">DataFrameRow
   Row │ exp_return  port_var   weight_IUSA.AS  weight_IBCI.AS  weight_IEMA.AS ⋯
       │ Float64     Float64    Float64         Float64         Float64        ⋯
───────┼────────────────────────────────────────────────────────────────────────
 10000 │  0.0175326  0.0438568        0.177076       0.0385638       0.0619035 ⋯
                                                               4 columns omitted</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_opt_sharp = sharp_ratio(port_sim) ;</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; port_opt_sharp[end,:]</code><code class="nohighlight hljs ansi" style="display:block;">DataFrameRow
   Row │ exp_return  port_var   weight_IUSA.AS  weight_IBCI.AS  weight_IEMA.AS ⋯
       │ Float64     Float64    Float64         Float64         Float64        ⋯
───────┼────────────────────────────────────────────────────────────────────────
 10000 │  0.0175326  0.0438568        0.177076       0.0385638       0.0619035 ⋯
                                                               4 columns omitted</code></pre><h3 id="limitations"><a class="docs-heading-anchor" href="#limitations">limitations</a><a id="limitations-1"></a><a class="docs-heading-anchor-permalink" href="#limitations" title="Permalink"></a></h3><p>There are three main limitation to this tool. The first limitation is that the MPT is a historical measurement of the portfolio performance. It does not say anything about future performance of the portfolio. Different Macro-economic situations might lead to total different end results. The second issue is that the tool is based on the expected return and variance of the portfolio. This captures the risk return relationship quite well but it does not take into account <a href="https://en.wikipedia.org/wiki/Skewness">skewness</a> and <a href="https://en.wikipedia.org/wiki/Tail_risk">tail risk</a>. It therefore gives rise to a reduced volatility and an inflated growth rate for a portfolio. Lastly, the risk measurement is probabilistic in nature. It does not reflect the structural roots of the risk. For example, the risk of a stock are off a total different nature then that of a commodity, but to tool will still account for them the same way. </p><h3 id="Recommendations-of-usage"><a class="docs-heading-anchor" href="#Recommendations-of-usage">Recommendations of usage</a><a id="Recommendations-of-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Recommendations-of-usage" title="Permalink"></a></h3><p>Never use this tool for individual stock picking and never but then also never rely <em>only</em> on the MPT. Always do your due diligence before creating your portfolio and again this is no way or form financial advice. </p><p>So why should you use this tool and for what purpose? It is highly recommended to use this tool with exchange traded funds (ETF) as these products are already substantially diversified and issue two of the MPT is therefore greatly diminished. Also, the structural risk that certain ETF are exposed is difficult the estimate and the MPT can help you gain insights into which ETF have less or more risk compared to the returns they offer. Lastly, MPT also works better if you invest in all assets classes as each class has risks of a different nature and you are then therefore not fully exposed to one particular kind of risk. </p><p>To know which portfolio weights you should apply, you have to understand your risk preference. If you do not want to take a lot of risk, it is beneficial to look at optimal portfolio&#39;s with low values in <span>$P$</span>. The reverse is true for people who are risk seeking. </p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="Theory.html">« theory</a><a class="docs-footer-nextpage" href="../lib/API.html">API »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Sunday 30 April 2023 20:39">Sunday 30 April 2023</span>. Using Julia version 1.6.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
